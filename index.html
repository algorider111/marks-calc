<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <title>Advanced GPA Calculator</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
   </head>
   <body class="bg-light">
      <div class="container py-4">
         <h2 class="text-center mb-4">
            Advanced GPA Calculator by <u><b>Ahnaf</b></u>
         </h2>
         <form>
            <h5 class="mb-3">ðŸ“˜ Subjects (3 Term Exams)</h5>
            <!-- SUBJECTS -->
            <div id="subjects">
               <!-- 100 MARKS -->
               <h6 class="text-primary">100 Marks Subjects</h6>
               <div class="subject card p-3 mb-3" data-full="100">
                  <b>Subject 1</b>
                  <div class="row g-2 mt-1">
                     <input type="number" class="form-control term" placeholder="Term 1">
                     <input type="number" class="form-control term" placeholder="Term 2">
                     <input type="number" class="form-control term" placeholder="Term 3">
                  </div>
               </div>
               <div class="subject card p-3 mb-3" data-full="100">
                  <b>Subject 2</b>
                  <div class="row g-2 mt-1">
                     <input type="number" class="form-control term" placeholder="Term 1">
                     <input type="number" class="form-control term" placeholder="Term 2">
                     <input type="number" class="form-control term" placeholder="Term 3">
                  </div>
               </div>
               <div class="subject card p-3 mb-3" data-full="100">
                  <b>Subject 3</b>
                  <div class="row g-2 mt-1">
                     <input type="number" class="form-control term" placeholder="Term 1">
                     <input type="number" class="form-control term" placeholder="Term 2">
                     <input type="number" class="form-control term" placeholder="Term 3">
                  </div>
               </div>
               <!-- 50 MARKS -->
               <h6 class="text-success">50 Marks Subjects</h6>
               <div class="subject card p-3 mb-3" data-full="50">
                  <b>Subject 4</b>
                  <div class="row g-2 mt-1">
                     <input type="number" class="form-control term" placeholder="Term 1">
                     <input type="number" class="form-control term" placeholder="Term 2">
                     <input type="number" class="form-control term" placeholder="Term 3">
                  </div>
               </div>
               <div class="subject card p-3 mb-3" data-full="50">
                  <b>Subject 5</b>
                  <div class="row g-2 mt-1">
                     <input type="number" class="form-control term" placeholder="Term 1">
                     <input type="number" class="form-control term" placeholder="Term 2">
                     <input type="number" class="form-control term" placeholder="Term 3">
                  </div>
               </div>
               <div class="subject card p-3 mb-3" data-full="50">
                  <b>Subject 6</b>
                  <div class="row g-2 mt-1">
                     <input type="number" class="form-control term" placeholder="Term 1">
                     <input type="number" class="form-control term" placeholder="Term 2">
                     <input type="number" class="form-control term" placeholder="Term 3">
                  </div>
               </div>
               <!-- 25 MARKS -->
               <h6 class="text-danger">25 Marks Subjects</h6>
               <div class="subject card p-3 mb-3" data-full="25">
                  <b>Subject 7</b>
                  <div class="row g-2 mt-1">
                     <input type="number" class="form-control term" placeholder="Term 1">
                     <input type="number" class="form-control term" placeholder="Term 2">
                     <input type="number" class="form-control term" placeholder="Term 3">
                  </div>
               </div>
               <div class="subject card p-3 mb-4" data-full="25">
                  <b>Subject 8</b>
                  <div class="row g-2 mt-1">
                     <input type="number" class="form-control term" placeholder="Term 1">
                     <input type="number" class="form-control term" placeholder="Term 2">
                     <input type="number" class="form-control term" placeholder="Term 3">
                  </div>
               </div>
            </div>
            <div class="d-flex gap-2">
               <button type="button" class="btn btn-success w-50" onclick="calculate()">Calculate</button>
               <button type="reset" class="btn btn-danger w-50" onclick="location.reload()">Reset</button>
            </div>
         </form>
         <div id="finalResult" class="alert alert-info mt-4 d-none"></div>
      </div>
      <script>
         function getGP(m,f){
          if(f==100)return m>=80?5:m>=70?4:m>=60?3.5:m>=50?3:m>=40?2:0;
          if(f==50)return m>=40?5:m>=35?4:m>=30?3.5:m>=25?3:m>=20?2:0;
          if(f==25)return m>=20?5:m>=18?4:m>=14?3.5:m>=12?3:m>=10?2:0;
          return 0;
         }
         function getGrade(gp){
          return gp==5?"A+":gp>=4?"A":gp>=3.5?"A-":gp>=3?"B":gp>=2?"C":"F";
         }
         
         function calculate(){
          const subs=document.querySelectorAll(".subject");
          let overallMarks=0, overallGP=0, rows="";
         
          subs.forEach((s,i)=>{
           const full=+s.dataset.full;
           const t=s.querySelectorAll(".term");
           let termMarks=[+t[0].value,+t[1].value,+t[2].value];
         
           if(termMarks.some(m=>isNaN(m)||m<0||m>full)){
             alert("Invalid marks in Subject "+(i+1)); throw "";
           }
         
           let termGP=termMarks.map(m=>getGP(m,full));
           let termGrade=termGP.map(g=>getGrade(g));
         
           let avgMark=(termMarks[0]+termMarks[1]+termMarks[2])/3;
           let avgGP=(termGP[0]+termGP[1]+termGP[2])/3;
           let avgGrade=getGrade(avgGP);
         
           overallMarks+=avgMark;
           overallGP+=avgGP;
         
           rows+=`
           <tr>
             <td>Subject ${i+1}</td>
             <td>${full}</td>
             <td>${termMarks[0]}<br><small>${termGrade[0]}</small></td>
             <td>${termMarks[1]}<br><small>${termGrade[1]}</small></td>
             <td>${termMarks[2]}<br><small>${termGrade[2]}</small></td>
             <td><b>${avgMark.toFixed(2)}</b></td>
             <td>${avgGP.toFixed(2)}</td>
             <td><b>${avgGrade}</b></td>
           </tr>`;
          });
         
          const finalGP=overallGP/subs.length;
          const finalGrade=getGrade(finalGP);
         
          const res=document.getElementById("finalResult");
          res.classList.remove("d-none");
          res.innerHTML=`
          <h5 class="mb-3">ðŸ“Š Final 3-Term Result Sheet</h5>
         
          <div class="table-responsive mb-3">
          <table class="table table-bordered text-center align-middle">
          <thead class="table-dark">
          <tr>
           <th>Subject</th><th>Full</th>
           <th>Term 1</th><th>Term 2</th><th>Term 3</th>
           <th>Avg Marks</th><th>Avg GPA</th><th>Avg Grade</th>
          </tr>
          </thead>
          <tbody>${rows}</tbody>
          </table>
          </div>
         
          <h6>ðŸŽ¯ Overall Final Result (3 Terms)</h6>
          <b>Final Average Marks:</b> ${overallMarks.toFixed(2)}<br>
          <b>Final Average GPA:</b> ${finalGP.toFixed(2)}<br>
          <b>Final Average Grade:</b> ${finalGrade}
          `;
         }
      </script>
      <br/>
      <br/>
   </body>
</html>
